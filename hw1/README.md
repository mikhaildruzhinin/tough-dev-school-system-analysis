# Домашняя работа №1

## Event Storming модель

Модель доступна по [ссылке](https://miro.com/app/board/uXjVLr3CjCk=/?share_link_id=346059167375).

При группровке команд и событий по контекстам я старался объединять в рамках одного контекста один (или несколько похожих) бизнес процессов.
Например, все команды и события, которые были связаны с обработкой заказов, были выделены в один контекст.
При таком разделении между контекстами очень мало или совсем нет.
Контексты получились очень разными по "размеру", самыми большими оказались обработка заказов и платежей, при этом сходу у меня не получилось выделить из них дополнительно логически обособленные элементы.

Отдельно хочу обратить внимание на контекст "Добавление новых заказчиков". 
В требованиях к системе указано, что закачики добавляются автоматически, и я делаю предположение, что это часть какого-то бОльшего процесса по управлению сотрудниками и клиентами компании.

## Логическая модель данных

Модель доступна по [ссылке](ldm/ldm.drawio.png).
Мастер-данные обведены чёрным цветом, а реплика для чтения -- синим.
Для простоты я не стал указывать мастер-данные для сущностей, описыающих клиентов и сотрудников компании.
Для таких сущностей мастер данными были бы данные из гипотетического контекста "Управление персоналом", частью которого мог бы быть и контекст "Обработка заявок от соискателей".
Возможный функционал такого контекста потенциально может быть очень велик, и т.к. он не был указан в требованиях к системе, я решил его опустить.

## Общая модель данных

Модель доступна по [ссылке](dm/dm.drawio.png).

## Реализация проекта

На начальном этапе в качестве структуры проекта я выбрал монолитное приложение.
Нужный бизнесу низкий Time To Market предполагается достигать за счёт простоты в разработке и обслуживании инфраструктуры для монолитного приложения по сравнению с микросервисной архитектурой.
Также скорее всего на начальном этапе разработка будет вестись небольшим числом инженеров, поэтому нет необходимости в выделении отдельных команд для разработки конкретных микросервисов и их независимого деплоя.

При этом разработка монолитного приложения зачастую приводит к тому, что бизнес-логика отдельных компонентов переплетается между собой и в дальнейшем становится сложно выделить отдельные слабо связанные части системы.
Для предотвращения этого риска предполагается разделить монолитное приложение на логически обособленные модули, каждый из которых представляет из себя один из контекстов, полученных в результате Event Storming'а.
В дальнейшем по мере необходимости можно будет любой из этих контекстов выделить в отдельный сервис для независимой разработки/деплоя/масштабирования.

Так как все модули в монолитном приложении будут работать с одной и той же базой данных, есть риск возникновения ситуаций, при которых два независимых друг от друга модуля одновременно вносят изменения в одну и ту же запись.
Для предотвращения этого риска важным требованием к выбору базы данных будет поддержка ACID транзакций.
Оборотной стороной такого решения будет вероятность возникновения ситуаций, когда открытая одним из модулей транзакция будет "тормозить" работу других модулей, нужно провести дополнительный анализ на эту тему.

Для хранения фотографий от исполнителей будет использоваться object storage хранилище.

Поскольку есть угроза ddos атак, доступ к приложению со стороны клиентов будет осществляться через обратный прокси сервер.

Для рассылки уведомлений предполагается использовать SMTP сервер.

Диаграмма компонентов доступна по [ссылке](components/components.drawio.png).
Зависимости между компонентами выделены пунктирными линиями. Чтобы не перегружать диаграмму, я не стал указывать зависимости от/к конкретным компонентам монолитного приложения.

## Дополнительные важные моменты и комментарии

1. По ходу выполнения работы сталкивался с недосказанностью и неоднозначностью формулировок, выделял такие места на стикерах в Event Storming модели.
2. Принял допущение, что клиентов, исполнителей и кандидатов в исполнители ведут одни и те же менеджеры. А вот менеджеры отдела качества -- это уже совсем другие люди.
3. Честно говоря, мне не хватает экспертизы оценить, нужны ли какие-то ещё сущности в модели данных в части обработки платежей.
4. Как я уже упоминал выше, напрашивается дополнительный контекст, описывающий управление сотрудниками компании (и возможно ещё один для заказчиков?). Чтобы скоуп работы не разрастался, я не стал его прорабатывать.
5. Контекст обработки заявок от соискателей можно будет выделить в отдельный сервис, если оправдается ожидание высокой нагрузки (1К заявок, для сравнения ожидается 10 заказов в день у основного функционала).
